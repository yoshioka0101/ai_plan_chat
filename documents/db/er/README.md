# ai_chat_task

## Tables

| Name | Columns | Comment | Type |
| ---- | ------- | ------- | ---- |
| [ai_interpretations](ai_interpretations.md) | 9 | AI解析履歴 | BASE TABLE |
| [atlas_schema_revisions](atlas_schema_revisions.md) | 12 |  | BASE TABLE |
| [interpretation_items](interpretation_items.md) | 11 | AI解釈アイテム（レビュー対象） | BASE TABLE |
| [tasks](tasks.md) | 10 | タスク | BASE TABLE |
| [user_auths](user_auths.md) | 7 | ユーザー認証情報 | BASE TABLE |
| [users](users.md) | 7 | ユーザー | BASE TABLE |

## Relations

```mermaid
erDiagram

"ai_interpretations" }o--|| "users" : "FOREIGN KEY (user_id) REFERENCES users (id)"
"interpretation_items" }o--|| "ai_interpretations" : "FOREIGN KEY (interpretation_id) REFERENCES ai_interpretations (id)"
"tasks" }o--o| "ai_interpretations" : "FOREIGN KEY (ai_interpretation_id) REFERENCES ai_interpretations (id)"
"tasks" }o--|| "users" : "FOREIGN KEY (user_id) REFERENCES users (id)"
"user_auths" }o--|| "users" : "FOREIGN KEY (user_id) REFERENCES users (id)"

"ai_interpretations" {
  char_36_ id PK
  char_36_ user_id FK
  text input_text
  json structured_result
  json original_result
  varchar_100_ ai_model
  int ai_prompt_tokens
  int ai_completion_tokens
  timestamp created_at
}
"atlas_schema_revisions" {
  varchar_255_ version PK
  varchar_255_ description
  bigint_unsigned type
  bigint applied
  bigint total
  timestamp executed_at
  bigint execution_time
  longtext error
  longtext error_stmt
  varchar_255_ hash
  json partial_hashes
  varchar_255_ operator_version
}
"interpretation_items" {
  char_36_ id PK
  char_36_ interpretation_id FK
  int item_index
  varchar_20_ resource_type
  char_36_ resource_id
  varchar_20_ status
  json data
  json original_data
  timestamp reviewed_at
  timestamp created_at
  timestamp updated_at
}
"tasks" {
  char_36_ id PK
  char_36_ user_id FK
  varchar_500_ title
  text description
  timestamp due_at
  varchar_20_ status
  varchar_20_ source
  char_36_ ai_interpretation_id FK
  timestamp created_at
  timestamp updated_at
}
"user_auths" {
  char_36_ id PK
  char_36_ user_id FK
  varchar_50_ identity_type
  varchar_255_ identifier
  text credential
  timestamp created_at
  timestamp updated_at
}
"users" {
  char_36_ id PK
  varchar_255_ google_id
  varchar_255_ email
  varchar_100_ nickname
  varchar_500_ avatar
  timestamp created_at
  timestamp updated_at
}
```

---

> Generated by [tbls](https://github.com/k1LoW/tbls)
